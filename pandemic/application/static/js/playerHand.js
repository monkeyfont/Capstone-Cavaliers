var CardImage = new Image(); CardImage.src = 'static/images/Cards/special/INFECTION_BACK.png';
var testCardImage = new Image(); testCardImage.src = 'static/images/infection-Front.png';

var SANFRANCISCO = new Image(); SANFRANCISCO.src = 'static/images/Cards/player/Blue/SAN_FRANCISCO.png';
var CHICAGO = new Image();  CHICAGO.src = 'static/images/Cards/player/Blue/CHICAGO.png';
var MONTREAL = new Image();  MONTREAL.src = 'static/images/Cards/player/Blue/MONTREAL.png';
var NEWYORK = new Image();  NEWYORK.src = 'static/images/Cards/player/Blue/NEW_YORK.png';
var ATLANTA = new Image();  ATLANTA.src =  'static/images/Cards/player/Blue/ATLANTA.png';
var WASHINGTON = new Image();  WASHINGTON.src = 'static/images/Cards/player/Blue/WASHINGTON.png';
var LONDON = new Image();  LONDON.src = 'static/images/Cards/player/Blue/LONDON.png';
var ESSEN = new Image();  ESSEN.src = 'static/images/Cards/player/Blue/ESSEN.png';
var STPETERSBURG = new Image();  STPETERSBURG.src = 'static/images/Cards/player/Blue/ST_PETERSBURG.png';
var MADRID = new Image();  MADRID.src = 'static/images/Cards/player/Blue/MADRID.png';
var PARIS = new Image();  PARIS.src = 'static/images/Cards/player/Blue/PARIS.png';
var MILAN = new Image();  MILAN.src = 'static/images/Cards/player/Blue/MILAN.png';

var LOSANGELES = new Image(); LOSANGELES.src = 'static/images/Cards/player/Yellow/LOS_ANGELES.png';
var MEXICOCITY = new Image();  MEXICOCITY.src = 'static/images/Cards/player/Yellow/MEXICO_CITY.png';
var MIAMI = new Image();  MIAMI.src = 'static/images/Cards/player/Yellow/MIAMI.png';
var BOGOTA = new Image();  BOGOTA.src = 'static/images/Cards/player/Yellow/BOGOTA.png';
var LIMA = new Image();  LIMA.src = 'static/images/Cards/player/Yellow/LIMA.png';
var SANTIAGO = new Image();  SANTIAGO.src = 'static/images/Cards/player/Yellow/SANTIAGO.png';
var BUENOSAIRES = new Image();  BUENOSAIRES.src = 'static/images/Cards/player/Yellow/BUENOS_AIRES.png';
var SAOPAULO = new Image();  SAOPAULO.src = 'static/images/Cards/player/Yellow/SAO_PAULO.png';
var LAGOS = new Image();  LAGOS.src = 'static/images/Cards/player/Yellow/LAGOS.png';
var KHARTOUM = new Image();  KHARTOUM.src = 'static/images/Cards/player/Yellow/KHARTOUM.png';
var KINSHASA = new Image(); KINSHASA.src = 'static/images/Cards/player/Yellow/KINSHASA.png';
var JOHANNESBURG = new Image();  JOHANNESBURG.src = 'static/images/Cards/player/Yellow/JOHANNESBURG.png';

var SYDNEY = new Image();  SYDNEY.src = 'static/images/Cards/player/Red/SYDNEY.png';
var JAKARTA = new Image(); JAKARTA.src = 'static/images/Cards/player/Red/JAKARTA.png';
var MANILA = new Image();  MANILA.src = 'static/images/Cards/player/Red/MANILA.png';
var HOCHIMINHCITY = new Image(); HOCHIMINHCITY.src = 'static/images/Cards/player/Red/HO_CHI_MINH_CITY.png';
var BANGKOK = new Image(); BANGKOK.src = 'static/images/Cards/player/Red/BANGKOK.png';
var TAIPEI = new Image(); TAIPEI.src = 'static/images/Cards/player/Red/TAIPEI.png';
var OSAKA = new Image();  OSAKA.src = 'static/images/Cards/player/Red/OSAKA.png';
var TOKYO = new Image();  TOKYO.src = 'static/images/Cards/player/Red/TOKYO.png';
var HONGKONG = new Image();  HONGKONG.src = 'static/images/Cards/player/Red/HONG_KONG.png';
var SHANGHAI = new Image(); SHANGHAI.src = 'static/images/Cards/player/Red/SHANGHAI.png';
var SEOUL = new Image();  SEOUL.src = 'static/images/Cards/player/Red/SEOUL.png';
var BEIJING = new Image();  BEIJING.src = 'static/images/Cards/player/Red/BEIJING.png';

var KOLKATA = new Image(); KOLKATA.src = 'static/images/Cards/player/Black/KOLKATA.png';
var CHENNAI = new Image();  CHENNAI.src = 'static/images/Cards/player/Black/CHENNAI.png';
var DELHI = new Image();  DELHI.src = 'static/images/Cards/player/Black/DELHI.png';
var MUMBAI = new Image();  MUMBAI.src = 'static/images/Cards/player/Black/MUMBAI.png';
var KARACHI = new Image(); KARACHI.src = 'static/images/Cards/player/Black/KARACHI.png';
var RIYADH = new Image();  RIYADH.src = 'static/images/Cards/player/Black/RIYADH.png';
var TEHRAN = new Image();  TEHRAN.src = 'static/images/Cards/player/Black/TEHRAN.png';
var MOSCOW = new Image();  MOSCOW.src = 'static/images/Cards/player/Black/MOSCOW.png';
var BAGHDAD = new Image(); BAGHDAD.src = 'static/images/Cards/player/Black/BAGHDAD.png';
var CAIRO = new Image();  CAIRO.src = 'static/images/Cards/player/Black/CAIRO.png';
var ISTANBUL = new Image();  ISTANBUL.src = 'static/images/Cards/player/Black/ISTANBUL.png';
var ALGIERS = new Image(); ALGIERS.src = 'static/images/Cards/player/Black/ALGIERS.png';

var AirLift = new Image(); AirLift.src = 'static/images/Cards/special/AIRLIFT.png';
var Epidemic = new Image(); Epidemic.src = 'static/images/Cards/special/EPIDEMIC.png';
var Forecast = new Image(); Forecast.src = 'static/images/Cards/special/FORECAST.png';
var Government_Grant = new Image(); Government_Grant.src = 'static/images/Cards/special/GOVERNMENT_GRANT.png';
var One_Quiet_Night = new Image(); One_Quiet_Night.src = 'static/images/Cards/special/ONE_QUIET_NIGHT.png';
var Resilent_Population = new Image(); Resilent_Population.src = 'static/images/Cards/special/RESILENT_POPULATION.png';

var allPossiblePlayerCards = {testCard:testCardImage,SANFRANCISCO,CHICAGO,MONTREAL,NEWYORK,ATLANTA,WASHINGTON,LONDON,ESSEN,STPETERSBURG,MADRID,PARIS,MILAN,
LOSANGELES,MEXICOCITY,MIAMI,BOGOTA,LIMA,SANTIAGO,BUENOSAIRES,SAOPAULO,LAGOS,KHARTOUM,KINSHASA,JOHANNESBURG,
SYDNEY,JAKARTA,MANILA,HOCHIMINHCITY,BANGKOK,TAIPEI,OSAKA,TOKYO,HONGKONG,SHANGHAI,SEOUL,BEIJING,
KOLKATA,CHENNAI,DELHI,MUMBAI,KARACHI,RIYADH,TEHRAN,MOSCOW,BAGHDAD,CAIRO,ISTANBUL,ALGIERS,AirLift,Epidemic,Forecast,Government_Grant,One_Quiet_Night,Resilent_Population}

function playerHand(){
	this.xPos = 960;
	this.yPos = 1080-150;
	this.activeCards = {}

	this.cards = {};

	this.toggleCardActivation = function(options){
		if (options.cardName in this.activeCards){
			delete this.activeCards[options.cardName]
			
		}else{
			this.activeCards[options.cardName] = options.cardName
		}
		
	}
	
	this.addCard = function (options){
		//options = {cardname:cardName}
		cardFront = allPossiblePlayerCards[options.cardName];
			newPlayerCard = new playerCard({
			id:"Infection player Card ",
			context: canvas.getContext("2d"),
			width: 200,
			height: 280,
			numberOfFrames: 1,
			ticksPerFrame: 1,
			xPos:1600,
			yPos:40,
			xScale:1,
			yScale:1,
			imageBack: CardImage,
			imageFront: cardFront
		});
		cardName = options.cardName;
		this.cards[cardName] = newPlayerCard;
		this.cards[cardName].flipping = true;
	}

	this.cardX = function (options){
		if (options.y > this.yPos && options.y < this.yPos+40){
			console.log('discarding a card')
			startPoint = this.xPos-(Object.keys(this.cards).length)/2*(510*0.4)
			cardNumber = Math.floor((options.x-startPoint)/(510*0.4))
			xStart = (510*0.4*(cardNumber+1))+startPoint-40
			console.log('xstart:',xStart)
			if (options.x>xStart){
			console.log(cardNumber)
			chosenCard = 'none'
			for ( i in this.cards){
				pos = Object.keys(this.cards).indexOf(i)
				if (pos == cardNumber){
					chosenCard = i;
					break
				}
			}
			if ( chosenCard != 'none'){
				console.log(chosenCard)
				socket.emit('discardCard', {cardName:chosenCard})
				this.removeCard({cardname:chosenCard})
				return true;
			}else{
				return false;
			}
			}
		}

	}
	
	this.cardClick = function (options){
		if (options.y > this.yPos && options.y < this.yPos+60){
			console.log('selecting a card')
			startPoint = this.xPos-(Object.keys(this.cards).length)/2*(510*0.4)
			cardNumber = Math.floor((options.x-startPoint)/(510*0.4))
			xStart = (510*0.4*(cardNumber+1))+startPoint-50
			console.log('xstart:',xStart)
			
			console.log(cardNumber)
			chosenCard = 'none'
			for ( i in this.cards){
				pos = Object.keys(this.cards).indexOf(i)
				if (pos == cardNumber){
					chosenCard = i;
					break
				}
			}
			console.log(chosenCard," was chosen")
			
			this.toggleCardActivation({cardName:chosenCard})
		}
	}

	this.removeCard = function (options){
		//options = {cardname:cardName}
		delete this.cards[options.cardname];
		delete this.activeCards[options.cardname]
	}
	
	this.render = function(){
		startPoint = this.xPos-(Object.keys(this.cards).length)/2*(510*0.4)
		pos = 0;
		for(i in this.cards){
			
			this.cards[i].move (startPoint+510*0.4*pos,this.yPos)
			this.cards[i].render();
			if (i in this.activeCards){
				canvas.getContext("2d").fillStyle = 'rgba(0,225,0,0.5)';
				canvas.getContext("2d").fillRect(startPoint+510*0.4*pos,this.yPos,200,280);				
			}
			pos++;
			
		}
		// console.log((Object.keys(this.cards).length)/2)
	}
}
